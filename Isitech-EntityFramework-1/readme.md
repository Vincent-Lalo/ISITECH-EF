# Connection à une base de données avec Entity Framework

## Préparation de la base de données
- Télécharger le script `Northwind.sql` et le mettre dans le dossier `Scripts` de votre serveur local
- Lancer la commande bash suivante dans le dossier `Scripts` qui va créer un fichier Northwind.db contenant la base de données :
    ```sh
    sqlite3 Northwind.db -init Northwind4SQLite.sql
    ```
- Intaller le package NuGet `System.Data.SQLite` dans le projet
- Créer un dossier `Models` dans le projet
- Créer un fichier `Northwind.cs` dans le dossier `Models`
- Installer dotnet-ef :
    ```sh
    dotnet tool install --global dotnet-ef
    ```
- Installer le package NuGet `Microsoft.EntityFrameworkCore.Design` dans le projet, version 7.0.8
- Pour générer les modèles, lancer la commande suivante :
    ```sh
    dotnet ef dbcontext scaffold "Filename=Script/Northwind.db" Microsoft.EntityFrameworkCore.Sqlite --table Categories --table Products --table Customers --table Orders --table OrderDetails --table Employees --table Shippers --table Suppliers --output-dir AutoGeneratedModels --namespace EFCore.Autogenerated --data-annotations --context Northwind
    ```

## Création de la base de données
- Créer une base de données nommée `Northwind` sur votre serveur local
- Exécuter le script `Northwind.sql` pour créer les tables et insérer les données
- Créer un projet de type `Console App (.NET Framework)` nommé `Isitech-EntityFramework-1`
- Installer le package NuGet `EntityFramework` dans le projet
- Créer un dossier `Models` dans le projet
- Créer un fichier `Northwind.cs` dans le dossier `Models`

## Création des modèles
- Créer une classe `Category` avec les propriétés suivantes :
    - `CategoryID` de type `int`
    - `CategoryName` de type `string`
    - `Description` de type `string`
    - `Picture` de type `byte[]`

- Créer une classe `Product` avec les propriétés suivantes :
    - `ProductID` de type `int`
    - `ProductName` de type `string`
    - `SupplierID` de type `int?`
    - `CategoryID` de type `int?`
    - `QuantityPerUnit` de type `string`
    - `UnitPrice` de type `decimal?`
    - `UnitsInStock` de type `short?`
    - `UnitsOnOrder` de type `short?`
    - `ReorderLevel` de type `short?`
    - `Discontinued` de type `bool`

- Créer une classe `Customer` avec les propriétés suivantes :
    - `CustomerID` de type `string`
    - `CompanyName` de type `string`
    - `ContactName` de type `string`
    - `ContactTitle` de type `string`
    - `Address` de type `string`
    - `City` de type `string`
    - `Region` de type `string`
    - `PostalCode` de type `string`
    - `Country` de type `string`
    - `Phone` de type `string`
    - `Fax` de type `string`

- Créer une classe `Order` avec les propriétés suivantes :
    - `OrderID` de type `int`
    - `CustomerID` de type `string`
    - `EmployeeID` de type `int?`
    - `OrderDate` de type `DateTime?`
    - `RequiredDate` de type `DateTime?`
    - `ShippedDate` de type `DateTime?`
    - `ShipVia` de type `int?`
    - `Freight` de type `decimal?`
    - `ShipName` de type `string`
    - `ShipAddress` de type `string`
    - `ShipCity` de type `string`
    - `ShipRegion` de type `string`
    - `ShipPostalCode` de type `string`
    - `ShipCountry` de type `string`

- Créer une classe `OrderDetail` avec les propriétés suivantes :
    - `OrderID` de type `int`
    - `ProductID` de type `int`
    - `UnitPrice` de type `decimal?`
    - `Quantity` de type `short?`
    - `Discount` de type `float?`

- Créer une classe `Employee` avec les propriétés suivantes :
    - `EmployeeID` de type `int`
    - `LastName` de type `string`
    - `FirstName` de type `string`
    - `Title` de type `string`
    - `TitleOfCourtesy` de type `string`
    - `BirthDate` de type `DateTime?`
    - `HireDate` de type `DateTime?`
    - `Address` de type `string`
    - `City` de type `string`
    - `Region` de type `string`
    - `PostalCode` de type `string`
    - `Country` de type `string`
    - `HomePhone` de type `string`
    - `Extension` de type `string`
    - `Photo` de type `byte[]`
    - `Notes` de type `string`
    - `ReportsTo` de type `int?`
    - `PhotoPath` de type `string`

- Créer une classe `Shipper` avec les propriétés suivantes :
    - `ShipperID` de type `int`
    - `CompanyName` de type `string`
    - `Phone` de type `string`

- Créer une classe `Supplier` avec les propriétés suivantes :
    - `SupplierID` de type `int`
    - `CompanyName` de type `string`
    - `ContactName` de type `string`
    - `ContactTitle` de type `string`
    - `Address` de type `string`
    - `City` de type `string`
    - `Region` de type `string`
    - `PostalCode` de type `string`
    - `Country` de type `string`
    - `Phone` de type `string`
    - `Fax` de type `string`

## Création du contexte
- Créer une classe `Northwind` dans le dossier `Models` avec les propriétés suivantes :
    - `Categories` de type `DbSet<Category>`
    - `Products` de type `DbSet<Product>`
    - `Customers` de type `DbSet<Customer>`
    - `Orders` de type `DbSet<Order>`
    - `OrderDetails` de type `DbSet<OrderDetail>`
    - `Employees` de type `DbSet<Employee>`
    - `Shippers` de type `DbSet<Shipper>`
    - `Suppliers` de type `DbSet<Supplier>`
